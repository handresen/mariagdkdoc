## Maria GDK and Visual studio 2013/2015 setup on Windows 10

### Install visual studio 2013 and 2015

*  Get and install latest Visual Studio Professional 2013 from MSDN using web installer. Make sure that C++ options are installed.

*  Get and install latest Visual Studio Enterprise 2015 from MSDN using web installer.
Note: Install 2013 before 2015. Some problems may occur if installed in wrong order. 2013 is required for the C++ compiler.

### Connect to TFS from VS

*  Team-Connect to Team Foundation Server

*  Server is "globe-dev4", enter without "http" or port, keep defaults

*  Select "MARIA"-project

### SlimDX install

Download and install 32 and 64 bit versions of SlimDX [http://slimdx.org/download.php](http://slimdx.org/download.php). Only 64 bit is necessary for internal development, install the 32 bit if testing map clients in 32 bit mode is required.

### Get source

*  From Team Explorer-Source Control Explorer, get MARIA/Development/MARIANG1.0

### Build

*  Open "MARIA/Development/MARIANG1.0/Src/Maria2012GDK.sln"

*  **Make sure that build config is set to debug or release, *"Any CPU"***

*  Perform rebuild-all. Note that a second build may be required if errors are encountered

*  If there are still many build errors, attempt source force get as mentioned in [Get source](vs2013#Get source)

*  If there are still many build errors, attempt VS restart

*  If there are still many build errors, contact project manager

### Resharper and Team City install

*  Go to [http://www.jetbrains.com/resharper/download/](http://www.jetbrains.com/resharper/download/)

*  Download and install latest version of ReSharper ULTIMATE. Enable all relevant products, including TeamCity addin. 2013 support can be skipped

*  Restart VS,load MARIANGBuild solution, wait until entire solution has been loaded

*  Enter ReSharper license information, "Use JB Account"

*  Open TEAMCITY-Remote Run(Local Changes) from VS menu. If the text "No modified files found. No version controls are enabled in Teamcity Option", click the link to TeamCity options

*  Select "Team Foundation Server"

*  Check "Enable Team Foundation Server support"

*  Details should already be filled in, press OK
    

### Service setup

*  Contact project manager to obtain testdata for services. Until centrally managed test data are established, data can be found at *T:\TEMP (slettes hver m√•ned)\eiu\ServiceTest*

*  To setup data using default service settings, copy the testdata to *c:\ServiceTest*. Change map/catalog service app configs or use [links](maria_gdk/maps/config/links) to perform advanced map setup

*  Try running a simple service hoster for for instance trackservice: `<mariaNG1.0 src folder>`/Hosts/TPG.Hosts.SimpleTrackServiceHost/bin/`<target>`/SimpleTrackServiceHost.exe

*  If this fails with repeated http listen access errors, add access control exceptions. Open cmd in admin, type "`<nowiki>`netsh http add urlacl url=http://+:9003/ user=teleplan\`<user>``</nowiki>`". See [ Configuring HTTP](http://blogs.msdn.com/b/drnick/archive/2006/10/16/configuring-http-for-windows-vista.aspx ) for details. Note that all services must be set up in this manner. Alternatively, the service hoster can be run in admin mode.

*  Spooler data for track service can be found at "Q:\50 GLO\95031-S-MARIA\F) Annet\TestData\Maria2012TestResourcesSprint34\Test data\Track\LoggedTracks"


### Run and test services and map client

*  Run map catalog service simple hoster (`<NGSrc>`\Hosts\TPG.Hosts.SimpleMapCatalogServiceHost\bin\`<tgt>`\SimpleMapCatalogServiceHost.exe)

*  Run map vector service (`<NGSrc>`\Hosts\)

### Sandcastle install

`<WRAP center round info 100%>`
Note: Only required to install if you need to compile documentation from code libraries.
`</WRAP>`

Download and install [Sandcastle](http://shfb.codeplex.com/) from Stardock. 
Click through the guided installation process until you reach the section on Microsoft Help 2 Compiler.

*  Answer Yes to continue without installing Microsoft Help 2 Compiler. 

*  Install SHFB. 

*  Install Package.

*  Install Schemas for relevant Visual Studio versions.

*  Install Snippets for relevant Visual Studio versions.

Using Visual Studio, navigate to [...]\tfs\globe-dev4\MARIA\Branches\Development\MariaNG1.0\Doc\ApiDoc\ and open solution TpgMariaDocumentation.sln.

Build the project => documentation is compiled and placed in subfolder [...]\tfs\globe-dev4\MARIA\Branches\Development\MariaNG1.0\Doc\ApiDoc\Out\.
Double-click index.html to display compiled documentation in a browser window.

Documentation is compiled and released to support-web nightly.

#### Adding additional libraries to documentation

Libraries to include in code documentation must be referenced in the TpgMariaDocumentation-solution. Right-click Documentation Sources and select "Add Documentation Source".

To Specify which classes to include from a library, right click "Project Properties" and select "Properties" submenu. Open Visibility -> Edit API filter, locate relevant libraries and deselect irrelevant classes.

If documentation isn't compiled as expected (f.ex. only generic documentation is compiled, no comments etc are included), check the build settings on the library source code project. Make sure XML documentation file is set up under Build -> Output.

#### Referencing code from dokuwiki

Use the generated hashtag when referencing compiled documentation from dokuwiki.

Example:


[[http://support.teleplanglobe.com/MariaGDKDoc/html/715B3D03.htm|IPlaceNameDB]]
```

### Team Foundation Sidekicks install

Team Foundation Sidekicks is a suite of tools for administrative and advanced version control tasks in multi-user TFS environments.

Download and install Sidekick from [Attrice](http://www.attrice.info/cm/tfs/).
