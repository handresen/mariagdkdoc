===== Native rendering =====

The Native rendering assembly is built as a Mixed Mode project inside the main Maria GDK solution. It links statically with the native libraries built by QMake.

==== Target platforms ====

The native assembly has separate configurations for x86 and x64 and needs to be built for both platforms if used in an AnyCPU project. In order to get the correct assemblies installed in a managed project, you can add the following command line as a post-build event:

  $(SolutionDir)\scripts\copy_native_client_dlls.cmd $(Platform) $(Configuration) $(SolutionDir)..\ $(TargetDir)
  
This will copy all the required dll's into the correct subdirectory of the target project. 

In order to load the correct assembly upon startup of the application you need to set up the correct DLL paths in your application:

**Example 1: WPF Application**

In a WPF application you need to install the DLL resolver in the Application_Startup event:

App.xaml.cs:

    using TPG.DotNetUtils;
    
    ...
    
    private void Application_Startup(object sender, StartupEventArgs e)
    {
        AnyCPUAssemblyResolver.InstallResolver();
        ...
    }
    
**Example 2: Console application:**

To use the native modules from a console application, you can install the resolver from Main(). However, make sure that you do not instantiate any classes using the native interface before you have installed the resolver.

    using TPG.DotNetUtils;
        
    ...
        
    static int Main(string[] args)
    {
          // This must be done in a separate method before instantiating any
          // of the classes depending on the native assemblies.
          AnyCPUAssemblyResolver.InstallResolver();
    
          return RunProgram(args);
    }
    
    


